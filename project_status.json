{
  "project_name": "mtg_price_predictor",
  "timestamp": "2025-05-10T16:00:00",
  "version": "0.1.5",
  "status": {
    "completed_modules": [
      "logger",
      "error_handler",
      "fetch_card_data",
      "fetch_market_data"
    ],
    "in_progress_module": "merge_data, clean_data",
    "pending_modules": [
      "feature_engineering",
      "train_model",
      "predict",
      "evaluate_model",
      "pipeline"
    ]
  },
  "configuration": {
    "data_paths": {
      "raw": "data/raw/",
      "processed": "data/processed/",
      "logs": "logs/"
    },
    "config_file": ".env",
    "database": {
      "type": "TimescaleDB",
      "name": "tsdb",
      "tables": {
        "market_prices": {
          "columns": [
            {"name": "id", "type": "serial4", "constraints": "NOT NULL"},
            {"name": "card_sku_id", "type": "int4", "constraints": "NOT NULL"},
            {"name": "low", "type": "int8", "constraints": "NULL"},
            {"name": "lowest_list", "type": "int8", "constraints": "NULL"},
            {"name": "market", "type": "int8", "constraints": "NULL"},
            {"name": "direct_low", "type": "int8", "constraints": "NULL"},
            {"name": "updated_at", "type": "timestamp", "constraints": "NOT NULL"}
          ]
        },
        "sales_history": {
          "columns": [
            {"name": "id", "type": "serial4", "constraints": "NOT NULL"},
            {"name": "card_sku_id", "type": "int4", "constraints": "NOT NULL"},
            {"name": "order_date", "type": "timestamp", "constraints": "NOT NULL"},
            {"name": "quantity", "type": "int2", "constraints": "NOT NULL"},
            {"name": "price", "type": "int8", "constraints": "NOT NULL"},
            {"name": "CONSTRAINT", "value": "sales_history_pkey PRIMARY KEY (id, order_date)"}
          ]
        },
        "listings": {
          "columns": [
            {"name": "id", "type": "serial4", "constraints": "NOT NULL"},
            {"name": "card_sku_id", "type": "int4", "constraints": "NOT NULL"},
            {"name": "seller_id", "type": "int4", "constraints": "NOT NULL"},
            {"name": "direct_inventory_count", "type": "int4", "constraints": "NOT NULL"},
            {"name": "shipping_price", "type": "int8", "constraints": "NOT NULL"},
            {"name": "quantity", "type": "int4", "constraints": "NOT NULL"},
            {"name": "price", "type": "int8", "constraints": "NOT NULL"},
            {"name": "updated_at", "type": "timestamp", "constraints": "NOT NULL"}
          ]
        }
      }
    },
    "api_endpoints": {
      "card_data": "https://api.scryfall.com/cards"
    }
  },
  "issues": [
    "clean_data.py error: 'card_sku_id' missing after outlier removal, fixed with robust column preservation",
    "clean_data.py triggered fetch_market_data.py in test, resolved with pre-fetched DataFrames",
    "listings table lacks explicit out-of-stock records (quantity == 0, direct_inventory_count == 0), likely due to data ingestion issue",
    "significant missing days in listings data, requiring imputation or handling strategy in clean_data.py",
    "recurring TypeError: Object of type Timestamp is not JSON serializable in scratch files, requiring timestamp string conversion",
    "high NaNs in sales_history post-merge, indicating date or card_sku_id alignment issues"
  ],
  "pipeline_status": {
    "last_run": "2025-05-10T02:20:40",
    "success": false,
    "error_log": "logs/error_log.json"
  },
  "notes": "Completed fetch_card_data (merging card_list.csv and card_attributes.csv) and fetch_market_data (60-day limit, sales frequency filter >= 12, price columns corrected by dividing by 100); updated fetch_market_data.py to simplify listings query (removed price_rank <= 5, retained sales filter, added is_low_inventory flag for direct_inventory_count <= 5); in progress with merging dataframes (scratch_merge_data.py, testing granular [6.6M rows] and aggregated [897K rows] listings merges); filtered 7.81% sales_history outliers before aggregation (IQR 2.0); clean_data in progress with outlier removal limited to sales_history.price using IQR (1.5, 2.0, 2.5) and z-score > 6; identified data ingestion issue in listings table (no quantity == 0 or direct_inventory_count == 0, low inventory <= 5 as proxy [27.36% granular], significant missing days); plan to impute or handle missing listings days in clean_data.py (e.g., direct_inventory_count = 0, is_missing_day flag); high NaNs in sales_history post-merge (34.85% granular, 45.81% aggregated) suggest date or card_sku_id alignment issues; tested NaN prevalence (0.55% in market_prices.low, 6.0% listings in granular merge); enhanced price metrics (mean, median, std, weighted average, skewness, kurtosis, volatility planned); listings handling denotes dropshipper_out_of_stock (direct_inventory_count == 0) and no-seller-inventory (quantity == 0) with boolean flags, low inventory flagged; encoding preferences: one-hot for condition, rarity; avoid cardinality for set, consider set release date later; resolved clean_data errors and TimescaleDB issues; fixed Timestamp JSON error in scratch files; .env used for TimescaleDB credentials; ongoing testing of merge_data for stability."
}